#!/usr/bin/env sh
# Try sourcing relative to git dir
if [ -z "$HUSKY_GIT_PARAMS" ]; then
    . "$(git rev-parse --git-dir)/hooks/husky.sh"
fi

echo "Running commit-msg hook: commitlint..."
pnpm exec commitlint --edit "$1"

EXIT_CODE=$?
if [ $EXIT_CODE -ne 0 ]; then
  echo "Commit-msg hook failed (commitlint). Please format commit message correctly (e.g., feat: add new feature)."
  exit $EXIT_CODE
fi

echo "Commit-msg hook passed."
exit 0 